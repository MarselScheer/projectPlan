---
title: "Start and end dates"
author: "Marsel Scheer"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Start and end dates}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
futile.logger::flog.threshold(futile.logger::WARN)

library(projectPlan)
suppressPackageStartupMessages(library(dplyr))
library(DT)
```

# Introduction

The duration of a task is defined by the two columns *start* and *end*. The duration of the task
can be implicitly (due to dependencies and estimated durations of a task) or explicitly defined.

# Explicit start and end dates

This is the easiest case. Just provide the date in the format *yyyy-mm-dd* for start and end date.
It is recommended to set the start date to the actual date when the task was started. 
This way it is directly documented when the task was started. It is also recommend to set the
actual end date once the task was completed.

```{r}
pA <- dplyr::tibble(
  project = c("A"), 
  section = "prep", task = paste0("task", 1:2), id = paste0("i", 1:2), 
  start = c("2018-12-10", "2018-12-11"),
  end   = c("2018-12-15", "2018-12-12"),
  progress = 0, 
  resource = "R1")
DT::datatable(pA)
```

# Implicit start and end dates

Lets look at a simple dependency, where id *i2* depends on id *i1*:
```{r}
pA <- dplyr::tibble(
  project = c("A"), 
  section = "prep", task = paste0("task", 1:2), id = paste0("i", 1:2), 
  start = c("2018-12-10", NA_character_),
  end   = c(NA_character_, NA_character_),
  depends_on = c(NA_character_, "i1"),
  est_duration = c(2,4),
  deadline = c(NA_character_, NA_character_),
  status = c("", ""),
  progress = 0, 
  resource = "R1")
DT::datatable(pA)
```

Wrangling this simple plan allows to calculate the timelines for both tasks:

```{r}
pA %>% 
  projectPlan::wrangle_raw_plan() %>% 
  calculate_time_lines() %>% 
  select(task, time_start, time_end) %>% 
  DT::datatable()
```

See the corresponding vignette for more details on id's and dependencies.
